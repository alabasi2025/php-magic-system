# تصميم نظام الوحدات المتعددة للأصناف

## 1. البنية المطلوبة

### جدول: item_units (علاقة بين الأصناف والوحدات)
```sql
- id (bigint, primary key)
- item_id (bigint, foreign key -> items.id)
- unit_id (bigint, foreign key -> units.id)
- capacity (decimal) - السعة بالنسبة للوحدة الرئيسية
- is_primary (boolean) - هل هذه الوحدة الرئيسية؟
- price (decimal) - سعر هذه الوحدة (اختياري)
- created_at
- updated_at
```

## 2. أمثلة عملية

### مثال: صنف الديزل
| الوحدة | السعة | رئيسية؟ | السعر |
|--------|-------|---------|-------|
| لتر    | 1     | ✅ نعم  | 5 ريال |
| دبة    | 20    | ❌ لا   | 95 ريال |
| برميل  | 200   | ❌ لا   | 950 ريال |

### مثال: صنف الأرز
| الوحدة | السعة | رئيسية؟ | السعر |
|--------|-------|---------|-------|
| كيلو   | 1     | ✅ نعم  | 8 ريال |
| كيس    | 50    | ❌ لا   | 380 ريال |

## 3. الواجهة التفاعلية

### مكونات الواجهة:
1. **قسم المعلومات الأساسية** (SKU, الاسم, الوصف)
2. **قسم الوحدات المتعددة** (ديناميكي):
   - اختيار الوحدة من القائمة أو إضافة جديدة
   - إدخال السعة
   - checkbox للوحدة الرئيسية
   - إدخال السعر (اختياري)
   - زر إضافة/حذف وحدة
3. **قسم المخزون** (الحد الأدنى/الأقصى)
4. **قسم الصورة والحالة**

### التفاعلية:
- إضافة وحدة جديدة بزر (+)
- حذف وحدة بزر (×)
- اختيار وحدة من dropdown أو إضافة جديدة
- حساب السعر تلقائياً بناءً على السعة
- التحقق من وجود وحدة رئيسية واحدة فقط

## 4. Validation Rules

- يجب وجود وحدة رئيسية واحدة على الأقل
- السعة يجب أن تكون أكبر من صفر
- لا يمكن تكرار نفس الوحدة للصنف الواحد
- الوحدة الرئيسية يجب أن تكون سعتها = 1
